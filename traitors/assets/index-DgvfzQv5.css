*{box-sizing:border-box}body{margin:0;font-family:Georgia,Times New Roman,Times,serif;background:radial-gradient(circle at 15% 8%,#f4f2f8,#ece8ef 42%,#e4dfe8);color:#14111a}.app{max-width:1420px;margin:0 auto;padding:2rem 1.2rem 2.6rem}.top h1{font-size:3rem;margin:0 0 .35rem;letter-spacing:.01em}.top p{margin:0 0 .55rem;max-width:80ch;font-size:1.06rem}.back-link{color:#1e172a;text-underline-offset:3px}.layout{margin-top:1rem;display:grid;grid-template-columns:minmax(0,1fr) 370px;gap:1.1rem;align-items:start}.phase-badge{font-style:italic;color:#5f506f;margin-bottom:.55rem}.scene-wrap{border:1px solid #3f3548;background:linear-gradient(170deg,#17161f,#25202f 52%,#312530);box-shadow:inset 0 0 0 1px #ffffff08;padding:.75rem}.room-strip{display:grid;grid-template-columns:repeat(4,minmax(0,1fr));gap:.45rem;margin-bottom:.68rem}.room{border:1px solid #4d4060;background:#1c1626;padding:.35rem .4rem;font-size:.72rem;letter-spacing:.02em;color:#b9adc8;text-transform:uppercase;text-align:center}.room.active{border-color:#dcb978;color:#f7edcf;background:linear-gradient(180deg,#4f3d23,#3a2a1a);box-shadow:0 0 0 1px #dcb97840;animation:roomPulse 2.3s ease-in-out infinite}.scene{position:relative;height:300px;border:1px solid #4a3d56;background:radial-gradient(circle at 50% 120%,#845f3a33,#0000 45%),linear-gradient(180deg,#31273d,#1f1b2a 62%,#17131f);overflow:hidden}.scene:before{content:"";position:absolute;inset:0;background:radial-gradient(circle at 15% 18%,rgba(255,220,150,.13),transparent 24%),radial-gradient(circle at 85% 16%,rgba(255,211,133,.11),transparent 22%),linear-gradient(180deg,#ffffff05,#0003);pointer-events:none;animation:torchFlicker 4.2s ease-in-out infinite alternate}.scene:after{content:"";position:absolute;left:-15%;top:66%;width:140%;height:52%;background:radial-gradient(ellipse at 20% 35%,#d2c6dc21,#d2c6dc00),radial-gradient(ellipse at 75% 45%,#beb8d31c,#beb8d300);pointer-events:none;animation:fogDrift 19s linear infinite;opacity:.55}.scene.day{background:radial-gradient(circle at 50% 110%,#69785833,#0000 45%),linear-gradient(180deg,#324240,#233332 60%,#1a2529)}.scene.night{background:radial-gradient(circle at 50% 120%,#654a7242,#0000 46%),linear-gradient(180deg,#241a33,#1a1527 58%,#120f1d)}.table{position:absolute;width:182px;height:182px;border:2px solid #8f7250;border-radius:50%;left:50%;top:51%;transform:translate(-50%,-50%);background:radial-gradient(circle at 34% 27%,#77583a,#61452f 44%,#4a3423 78%,#3a291d);box-shadow:0 0 0 3px #00000029,0 10px 30px #00000047;animation:tableBreathe 5.6s ease-in-out infinite}.flash-layer{position:absolute;inset:0;pointer-events:none;opacity:0;z-index:3}.flash-layer.active{animation:lanternFlash .68s ease-out forwards}.flash-layer.banishment{background:radial-gradient(circle at 50% 44%,#ffecb0b3,#ffecb000 43%),radial-gradient(circle at 50% 66%,#ffb77073,#ffb77000 55%)}.flash-layer.night{background:radial-gradient(circle at 50% 36%,#b5a2ff73,#b5a2ff00 42%),radial-gradient(circle at 50% 72%,#6d57a559,#6d57a500 58%);animation-duration:.84s}.seat{position:absolute;left:50%;top:51%;transform:rotate(var(--angle)) translateY(-126px) rotate(calc(-1 * var(--angle)));padding:.22rem .42rem;border:1px solid #5f506f;background:linear-gradient(180deg,#2e2540,#231d33);color:#efe8f9;font-size:.79rem;white-space:nowrap;box-shadow:0 2px 6px #00000047;z-index:2}.seat.human{border-color:#d57b5f;background:linear-gradient(180deg,#5a2f28,#3c221f);color:#ffe8df;font-weight:700}.seat.dead{opacity:.42;filter:grayscale(.9);text-decoration:line-through}.log{border:1px solid #5b4b3a;background:linear-gradient(180deg,#f2e4cb,#e9d9ba);color:#2b1e14;padding:.75rem;margin-top:.8rem;max-height:420px;overflow:auto}.line{margin-bottom:.75rem;border-bottom:1px dotted rgba(66,45,22,.24);padding-bottom:.42rem}.label{color:#6b4e31;font-style:italic;font-size:.8rem;margin-bottom:.18rem;text-transform:lowercase;letter-spacing:.02em}.controls{border:1px solid #4a3f57;background:linear-gradient(180deg,#2a2237,#1e1929);color:#f0e9fa;padding:.72rem;display:flex;flex-direction:column;gap:.55rem}.controls button,.controls input,.controls select,.controls textarea{font-family:Georgia,Times New Roman,Times,serif;font-size:.98rem}.controls button{border:1px solid #7b6a92;background:#ffffff0a;color:#f5f0fb;padding:.42rem .62rem;cursor:pointer;text-align:left}.controls button:hover{border-color:#d6b981;color:#fff6df}.controls button:disabled{opacity:.45;cursor:default}.step{border-top:1px solid #433753;padding-top:.72rem;display:flex;flex-direction:column;gap:.35rem}.step label{color:#ece1fa}.step textarea{min-height:86px;resize:vertical}.step input,.step select,.step textarea{border:1px solid #736188;background:#f5efff;color:#21162b;padding:.38rem .45rem}.step.end{font-weight:700;color:#f6e9d2}.error{margin-top:.35rem;color:#ffd0d0}@keyframes roomPulse{0%{box-shadow:0 0 0 1px #dcb97833,0 0 #dcb97800}50%{box-shadow:0 0 0 1px #dcb97859,0 0 16px #dcb9782e}to{box-shadow:0 0 0 1px #dcb97833,0 0 #dcb97800}}@keyframes torchFlicker{0%{filter:brightness(.96) saturate(.95);opacity:.94}28%{filter:brightness(1.04) saturate(1.02);opacity:1}56%{filter:brightness(.99) saturate(1);opacity:.97}to{filter:brightness(1.06) saturate(1.05);opacity:1}}@keyframes fogDrift{0%{transform:translate(-4%)}50%{transform:translate(3%)}to{transform:translate(-4%)}}@keyframes tableBreathe{0%{transform:translate(-50%,-50%) scale(1)}50%{transform:translate(-50%,-50%) scale(1.012)}to{transform:translate(-50%,-50%) scale(1)}}@keyframes lanternFlash{0%{opacity:0}22%{opacity:1}55%{opacity:.45}to{opacity:0}}@media(max-width:980px){.layout{grid-template-columns:1fr}.room-strip{grid-template-columns:repeat(2,minmax(0,1fr))}}@media(prefers-reduced-motion:reduce){.room.active,.scene:before,.scene:after,.table,.flash-layer.active{animation:none!important}}
